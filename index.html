<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WT-08 è¡Œå‹•é›»æº - 3D ç”¢å“å±•ç¤º</title>
    
    <!-- ç¶²ç«™ç¸®åœ–è¨­å®š -->
    <meta name="description" content="WT-08 æ–°ä¸–ä»£è¡Œå‹•é›»æº 3D äº’å‹•å±•ç¤º - æ™ºèƒ½LEDé¡¯ç¤ºã€å¿«é€Ÿå……é›»ã€é«˜å“è³ªé‡‘å±¬å¤–æ®¼">
    
    <!-- Open Graph æ¨™ç±¤ (Facebook, LinkedIn ç­‰) -->
    <meta property="og:title" content="WT-08 è¡Œå‹•é›»æº - 3D ç”¢å“å±•ç¤º">
    <meta property="og:description" content="WT-08 æ–°ä¸–ä»£è¡Œå‹•é›»æº 3D äº’å‹•å±•ç¤º - æ™ºèƒ½LEDé¡¯ç¤ºã€å¿«é€Ÿå……é›»ã€é«˜å“è³ªé‡‘å±¬å¤–æ®¼">
    <meta property="og:image" content="Thumb.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    
    <!-- Twitter Card æ¨™ç±¤ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="WT-08 è¡Œå‹•é›»æº - 3D ç”¢å“å±•ç¤º">
    <meta name="twitter:description" content="WT-08 æ–°ä¸–ä»£è¡Œå‹•é›»æº 3D äº’å‹•å±•ç¤º - æ™ºèƒ½LEDé¡¯ç¤ºã€å¿«é€Ÿå……é›»ã€é«˜å“è³ªé‡‘å±¬å¤–æ®¼">
    <meta name="twitter:image" content="Thumb.png">
    
    <!-- ç€è¦½å™¨åœ–ç¤º -->
    <link rel="icon" type="image/png" href="Thumb.png">
    <link rel="apple-touch-icon" href="Thumb.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            overflow-x: hidden;
        }

        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* 3D å±•ç¤ºå€åŸŸ */
        #three-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: grab;
            touch-action: none; /* ç¦ç”¨ç€è¦½å™¨é è¨­çš„è§¸æ§è¡Œç‚º */
        }

        #three-container:active {
            cursor: grabbing;
        }

        /* æ¨™é¡Œå€åŸŸ */
        .header {
            position: absolute;
            top: 50px;
            left: 50px;
            z-index: 10;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 20px;
        }

        .main-title {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }



        /* LED è³‡è¨Šå¡ç‰‡ */
        .led-info-card {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%) translateX(100px);
            z-index: 15;
            width: 320px;
            background: rgba(0, 255, 0, 0.1);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(0, 255, 0, 0.3);
            border-radius: 20px;
            padding: 25px;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 40px rgba(0, 255, 0, 0.1);
        }

        .led-info-card.show {
            transform: translateY(-50%) translateX(0);
            opacity: 1;
        }

        .led-info-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #00FF00;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .led-icon {
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #00FF00, #00AA00);
            border-radius: 50%;
            animation: ledPulse 2s ease-in-out infinite alternate;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
        }

        .led-info-card p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #E8F5E8;
        }

        .led-features {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .led-features li {
            margin: 10px 0;
            padding-left: 25px;
            position: relative;
            color: #D0F0D0;
        }

        .led-features li::before {
            content: "â—";
            position: absolute;
            left: 0;
            color: #00FF00;
            font-size: 1.2rem;
            animation: ledBlink 1.5s ease-in-out infinite;
        }

        /* æ§åˆ¶æç¤º */
        .controls-hint {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            animation: pulse 2s infinite;
        }

        .controls-hint p {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .mouse-icon {
            font-size: 2rem;
            animation: bounce 1.5s infinite;
        }

        @keyframes ledPulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        @keyframes ledBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        /* æŒ‡ç¤ºç·š */
        .pointer-line {
            position: absolute;
            z-index: 14;
            pointer-events: none;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .pointer-line.show {
            opacity: 1;
        }

        .pointer-line svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .pointer-line path {
            fill: none;
            stroke: #00FF00;
            stroke-width: 3;
            stroke-dasharray: 10, 5;
            animation: dashMove 2s linear infinite;
            filter: drop-shadow(0 0 8px rgba(0, 255, 0, 0.6));
        }

        .pointer-dot {
            fill: #00FF00;
            r: 6;
            animation: dotPulse 1.5s ease-in-out infinite alternate;
            filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
        }

        @keyframes dashMove {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 15; }
        }

        @keyframes dotPulse {
            0% { r: 6; }
            100% { r: 9; }
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 20;
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .header {
                top: 20px;
                left: 20px;
            }

            .logo {
                width: 80px; /* æ‰‹æ©Ÿç‰ˆç¸®å° logo */
                margin-bottom: 15px;
            }

            .main-title {
                font-size: 1.8rem; /* èª¿æ•´æ¨™é¡Œå¤§å° */
            }

            .subtitle {
                font-size: 1rem; /* èª¿æ•´å‰¯æ¨™é¡Œå¤§å° */
            }

            .controls-hint {
                bottom: 15px;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
            }

            .controls-hint p {
                font-size: 0.9rem; /* èª¿æ•´æ§åˆ¶æç¤ºæ–‡å­—å¤§å° */
                margin-bottom: 8px;
            }

            .mouse-icon {
                font-size: 1.5rem; /* èª¿æ•´åœ–æ¨™å¤§å° */
            }

            /* æ‰‹æ©Ÿç‰ˆè³‡è¨Šå¡é‡æ–°è¨­è¨ˆ */
            .led-info-card {
                position: fixed; /* æ”¹ç‚ºå›ºå®šå®šä½ */
                left: 15px;
                right: 15px;
                bottom: 80px; /* è·é›¢åº•éƒ¨æ›´é ä¸€äº› */
                top: auto;
                width: auto;
                max-width: none;
                padding: 20px; /* æ¸›å°‘å…§é‚Šè· */
                transform: translateY(120px); /* åˆå§‹éš±è—ä½ç½® */
                border-radius: 15px; /* ç¨å¾®æ¸›å°‘åœ“è§’ */
                backdrop-filter: blur(10px); /* ç¨å¾®æ¸›å°‘æ¨¡ç³Šæ•ˆæœ */
                box-shadow: 0 15px 30px rgba(0, 255, 0, 0.15); /* èª¿æ•´é™°å½± */
            }

            .led-info-card.show {
                transform: translateY(0); /* é¡¯ç¤ºæ™‚çš„ä½ç½® */
            }

            .led-info-card h3 {
                font-size: 1.3rem; /* èª¿æ•´æ¨™é¡Œå¤§å° */
                margin-bottom: 12px;
                gap: 8px;
            }

            .led-icon {
                width: 25px; /* ç¸®å°åœ–æ¨™ */
                height: 25px;
            }

            .led-info-card p {
                font-size: 0.9rem; /* èª¿æ•´æ®µè½æ–‡å­—å¤§å° */
                line-height: 1.5;
                margin-bottom: 12px;
            }

            .led-features {
                margin: 0;
            }

            .led-features li {
                margin: 8px 0; /* æ¸›å°‘é …ç›®é–“è· */
                padding-left: 20px; /* èª¿æ•´ç¸®é€² */
                font-size: 0.85rem; /* èª¿æ•´æ¸…å–®æ–‡å­—å¤§å° */
                line-height: 1.4;
            }

            .led-features li::before {
                font-size: 1rem; /* èª¿æ•´é …ç›®ç¬¦è™Ÿå¤§å° */
            }

            /* æ‰‹æ©Ÿç‰ˆæŒ‡ç¤ºç·šèª¿æ•´ */
            .pointer-line path {
                stroke-width: 2;
            }

            .pointer-dot {
                r: 4;
            }
        }

        /* æ›´å°è¢å¹•çš„é¡å¤–å„ªåŒ– */
        @media (max-width: 480px) {
            .header {
                top: 15px;
                left: 15px;
            }

            .logo {
                width: 60px;
                margin-bottom: 10px;
            }

            .main-title {
                font-size: 1.5rem;
            }

            .subtitle {
                font-size: 0.9rem;
            }

            .led-info-card {
                left: 10px;
                right: 10px;
                bottom: 70px;
                padding: 15px;
            }

            .led-info-card h3 {
                font-size: 1.2rem;
                margin-bottom: 10px;
            }

            .led-icon {
                width: 20px;
                height: 20px;
            }

            .led-info-card p {
                font-size: 0.85rem;
                margin-bottom: 10px;
            }

            .led-features li {
                font-size: 0.8rem;
                margin: 6px 0;
                padding-left: 18px;
            }

            .controls-hint p {
                font-size: 0.8rem;
            }

            .mouse-icon {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- è¼‰å…¥ç•«é¢ -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>è¼‰å…¥ 3D æ¨¡å‹ä¸­...</p>
        </div>

        <!-- 3D å±•ç¤ºå€åŸŸ -->
        <div id="three-container"></div>

        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="header">
            <img src="3D/LOGO_WT08.png" alt="WT-08 Logo" class="logo">
            <h1 class="main-title">WT-08</h1>
            <p class="subtitle">æ–°ä¸–ä»£è¡Œå‹•é›»æº</p>
        </div>



        <!-- æŒ‡ç¤ºç·š -->
        <div class="pointer-line" id="pointer-line">
            <svg>
                <path id="pointer-path" d=""/>
                <circle class="pointer-dot" id="pointer-dot" cx="0" cy="0"/>
            </svg>
        </div>

        <!-- LED è³‡è¨Šå¡ç‰‡ -->
        <div class="led-info-card" id="led-card">
            <h3>
                <div class="led-icon"></div>
                LED é›»é‡é¡¯ç¤ºè¢å¹•
            </h3>
            <p>æ™ºèƒ½æ•¸ä½é¡¯ç¤ºç³»çµ±ï¼Œè®“æ‚¨éš¨æ™‚æŒæ¡é›»é‡ç‹€æ…‹</p>
            <ul class="led-features">
                <li>å››æ®µå¼ LED é›»é‡æŒ‡ç¤º</li>
                <li>ç²¾æº–ç™¾åˆ†æ¯”æ•¸å­—é¡¯ç¤º</li>
                <li>å……é›»ç‹€æ…‹å³æ™‚é¡¯ç¤º</li>
                <li>ä½é›»é‡è­¦ç¤ºåŠŸèƒ½</li>
                <li>å¤œé–“èƒŒå…‰è¨­è¨ˆ</li>
            </ul>
        </div>

        <!-- æ§åˆ¶æç¤º -->
        <div class="controls-hint">
            <p id="control-text">ä½¿ç”¨æ»¾è¼ªæˆ–è§¸æ§æ‹–æ‹½æ—‹è½‰ç”¢å“ â€¢ è½‰åˆ°æ­£é¢æŸ¥çœ‹ LED åŠŸèƒ½</p>
            <div class="mouse-icon" id="control-icon">ğŸ–±ï¸</div>
        </div>
    </div>

    <!-- Three.js æ¨¡çµ„è¼‰å…¥ -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { FBXLoader } from 'three/addons/loaders/FBXLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // å…¨åŸŸè®Šæ•¸
        let scene, camera, renderer, controls;
        let powerBank = null;
        let isLoaded = false;
        
        // è§¸æ§æ§åˆ¶è®Šæ•¸
        let isTouching = false;
        let previousTouchX = 0;
        let touchStartX = 0;

        // éŸ¿æ‡‰å¼ç¸®æ”¾å‡½æ•¸
        function getResponsiveScale() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            
            // æ ¹æ“šè¢å¹•å¤§å°èª¿æ•´ç¸®æ”¾æ¯”ä¾‹
            if (width < 768) {
                // æ‰‹æ©Ÿè¢å¹•ï¼šç¸®å°ä¸€äº›
                return 0.7;
            } else if (width < 1024) {
                // å¹³æ¿è¢å¹•ï¼šç¨å¾®ç¸®å°
                return 0.85;
            } else if (width > 1920) {
                // å¤§è¢å¹•ï¼šç¨å¾®æ”¾å¤§
                return 1.2;
            } else {
                // æ¡Œæ©Ÿè¢å¹•ï¼šæ¨™æº–å¤§å°
                return 1.0;
            }
        }

        // éŸ¿æ‡‰å¼ç›¸æ©Ÿè·é›¢å‡½æ•¸
        function getResponsiveCameraDistance() {
            const width = window.innerWidth;
            
            // æ ¹æ“šè¢å¹•å¤§å°èª¿æ•´ç›¸æ©Ÿè·é›¢
            if (width < 768) {
                // æ‰‹æ©Ÿè¢å¹•ï¼šç›¸æ©Ÿæ‹‰é ä¸€äº›
                return 5;
            } else if (width < 1024) {
                // å¹³æ¿è¢å¹•ï¼šä¸­ç­‰è·é›¢
                return 4.5;
            } else if (width > 1920) {
                // å¤§è¢å¹•ï¼šå¯ä»¥æ‹‰è¿‘ä¸€äº›
                return 3.5;
            } else {
                // æ¡Œæ©Ÿè¢å¹•ï¼šæ¨™æº–è·é›¢
                return 4;
            }
        }

        // åˆå§‹åŒ– 3D å ´æ™¯
        function init() {
            // å‰µå»ºå ´æ™¯
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            scene.fog = new THREE.Fog(0x000000, 10, 50);

            // å‰µå»ºç›¸æ©Ÿï¼ˆéŸ¿æ‡‰å¼ä½ç½®ï¼‰
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const responsiveDistance = getResponsiveCameraDistance();
            camera.position.set(responsiveDistance, responsiveDistance * 0.7, responsiveDistance);

            // å‰µå»ºæ¸²æŸ“å™¨
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            document.getElementById('three-container').appendChild(renderer.domElement);

            // è¨­ç½®æ§åˆ¶å™¨ï¼ˆå®Œå…¨åœç”¨ï¼Œæˆ‘å€‘ç”¨è‡ªè¨‚æ»¾è¼ªæ§åˆ¶ï¼‰
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = false;
            controls.enableZoom = false;    // åœç”¨æ»¾è¼ªç¸®æ”¾
            controls.enableRotate = false;  // åœç”¨æ»‘é¼ æ‹–æ›³æ—‹è½‰
            controls.enablePan = false;     // åœç”¨å¹³ç§»

            // æ·»åŠ ç‡ˆå…‰
            setupLighting();

            // è¼‰å…¥ 3D æ¨¡å‹
            loadModel();

            // é–‹å§‹æ¸²æŸ“å¾ªç’°
            animate();

            // æ·»åŠ äº‹ä»¶ç›£è½å™¨
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('wheel', onWheel, { passive: false });
            
            // æ·»åŠ è§¸æ§äº‹ä»¶ç›£è½å™¨
            const container = document.getElementById('three-container');
            container.addEventListener('touchstart', onTouchStart, { passive: false });
            container.addEventListener('touchmove', onTouchMove, { passive: false });
            container.addEventListener('touchend', onTouchEnd, { passive: false });
        }

        // è¨­ç½®ç‡ˆå…‰ - é‡å°é‡‘å±¬æè³ªå„ªåŒ–
        function setupLighting() {
            // ä¸»å…‰æº - å¢å¼·äº®åº¦çªå‡ºé‡‘å±¬è³ªæ„Ÿ
            const mainLight = new THREE.DirectionalLight(0xffffff, 1.2);
            mainLight.position.set(10, 10, 5);
            mainLight.castShadow = true;
            mainLight.shadow.mapSize.width = 2048;
            mainLight.shadow.mapSize.height = 2048;
            scene.add(mainLight);

            // ç’°å¢ƒå…‰ - é©åº¦å¢å¼·
            const ambientLight = new THREE.AmbientLight(0x404040, 0.8);
            scene.add(ambientLight);

            // å¡«è£œå…‰ - å¢å¼·åå°„æ•ˆæœ
            const fillLight = new THREE.DirectionalLight(0x87CEEB, 0.6);
            fillLight.position.set(-5, 5, -5);
            scene.add(fillLight);

            // èƒŒæ™¯å…‰ - å¢å¼·é‚Šç·£å…‰æ•ˆæœ
            const rimLight = new THREE.DirectionalLight(0xffffff, 0.5);
            rimLight.position.set(0, 0, -10);
            scene.add(rimLight);

            // æ·»åŠ é¡å¤–çš„é‡‘å±¬åå°„å…‰
            const metalLight = new THREE.DirectionalLight(0xffffff, 0.4);
            metalLight.position.set(-10, -5, 10);
            scene.add(metalLight);
        }

        // å‰µå»ºæ›¿ä»£æ¨¡å‹ï¼ˆç•¶ FBX è¼‰å…¥å¤±æ•—æ™‚ä½¿ç”¨ï¼‰
        function createFallbackModel() {
            // å‰µå»ºä¸€å€‹ç°¡å–®çš„è¡Œå‹•é›»æºå½¢ç‹€æ›¿ä»£æ¨¡å‹
            const group = new THREE.Group();
            
            // ä¸»é«” - èª¿æ•´ç‚ºé©åˆéŸ¿æ‡‰å¼è¨­è¨ˆçš„åŸºç¤å°ºå¯¸ï¼Œä½¿ç”¨éŠ€è‰²é‡‘å±¬æè³ª
            const bodyGeometry = new THREE.BoxGeometry(6, 2.4, 12);  // å†æ”¾å¤§50%ï¼Œé…åˆæ–°çš„ç¸®æ”¾ç³»çµ±
            const bodyMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xC0C0C0,        // éŠ€è‰²
                metalness: 0.9,         // é«˜é‡‘å±¬åº¦
                roughness: 0.1,         // ä½ç²—ç³™åº¦
                envMapIntensity: 1.5    // ç’°å¢ƒåå°„å¼·åº¦
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;
            body.receiveShadow = true;
            group.add(body);
            
            // USB æ¥å£ - å†æ”¾å¤§50%ï¼Œä½¿ç”¨æ·±è‰²é‡‘å±¬æè³ª
            const usbGeometry = new THREE.BoxGeometry(0.9, 0.3, 1.8);  // å†æ”¾å¤§50%
            const usbMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x404040,        // æ·±ç°è‰²
                metalness: 0.8,         // é‡‘å±¬åº¦
                roughness: 0.3          // ç¨å¾®ç²—ç³™
            });
            const usb1 = new THREE.Mesh(usbGeometry, usbMaterial);
            usb1.position.set(-2.1, 0.9, -5.4);  // èª¿æ•´ä½ç½®
            group.add(usb1);
            
            const usb2 = new THREE.Mesh(usbGeometry, usbMaterial);
            usb2.position.set(2.1, 0.9, -5.4);  // èª¿æ•´ä½ç½®
            group.add(usb2);
            
            // LED æŒ‡ç¤ºç‡ˆ - å†æ”¾å¤§50%
            const ledGeometry = new THREE.SphereGeometry(0.15, 16, 16);  // å†æ”¾å¤§50%
            const ledMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x00ff00,
                emissive: 0x004400
            });
            for (let i = 0; i < 4; i++) {
                const led = new THREE.Mesh(ledGeometry, ledMaterial);
                led.position.set(-1.8 + i * 1.2, 1.23, 1.5);  // èª¿æ•´ä½ç½®å’Œé–“è·
                group.add(led);
            }
            
            // å“ç‰Œæ¨™èªŒå€åŸŸ - å†æ”¾å¤§50%
            const logoGeometry = new THREE.PlaneGeometry(4.5, 1.5);  // å†æ”¾å¤§50%
            const logoMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffffff,
                transparent: true,
                opacity: 0.9
            });
            const logo = new THREE.Mesh(logoGeometry, logoMaterial);
            logo.position.set(0, 1.23, 3);  // èª¿æ•´ä½ç½®
            logo.rotation.x = -Math.PI / 2;
            group.add(logo);
            
            return group;
        }

        // è¼‰å…¥ 3D æ¨¡å‹
        function loadModel() {
            const loader = new FBXLoader();
            
            loader.load(
                '3D/WT-08.fbx',
                function (object) {
                    powerBank = object;
                    
                    // èª¿æ•´æ¨¡å‹å¤§å°å’Œä½ç½®ï¼ˆéŸ¿æ‡‰å¼ç¸®æ”¾ï¼‰
                    const baseScale = 0.3;  // å†æ”¾å¤§50%ï¼Œç¾åœ¨æ˜¯åŸä¾†çš„30å€
                    const responsiveScale = getResponsiveScale();
                    object.scale.setScalar(baseScale * responsiveScale);
                    object.position.set(0, 0, 0);  // ç½®ä¸­é¡¯ç¤º
                    
                    // æ·»åŠ é™°å½±å’ŒéŠ€è‰²é‡‘å±¬æè³ª
                    object.traverse(function (child) {
                        if (child.isMesh) {
                            child.castShadow = true;
                            child.receiveShadow = true;
                            
                            // æ‡‰ç”¨éŠ€è‰²é‡‘å±¬æè³ª
                            if (child.material) {
                                // å¦‚æœæ˜¯æ¨™æº–æè³ªï¼Œç›´æ¥ä¿®æ”¹
                                if (child.material.isMeshStandardMaterial || child.material.isMeshPhongMaterial) {
                                    child.material.color.setHex(0xC0C0C0);  // éŠ€è‰²
                                    child.material.metalness = 0.9;         // é«˜é‡‘å±¬åº¦
                                    child.material.roughness = 0.1;         // ä½ç²—ç³™åº¦ï¼Œæ›´å…‰æ»‘
                                    child.material.envMapIntensity = 1.5;   // å¢å¼·ç’°å¢ƒåå°„
                                } else {
                                    // å¦‚æœä¸æ˜¯æ¨™æº–æè³ªï¼Œå‰µå»ºæ–°çš„é‡‘å±¬æè³ª
                                    const metalMaterial = new THREE.MeshStandardMaterial({
                                        color: 0xC0C0C0,        // éŠ€è‰²
                                        metalness: 0.9,         // é«˜é‡‘å±¬åº¦
                                        roughness: 0.1,         // ä½ç²—ç³™åº¦
                                        envMapIntensity: 1.5    // ç’°å¢ƒåå°„å¼·åº¦
                                    });
                                    child.material = metalMaterial;
                                }
                                
                                // ç¢ºä¿æè³ªéœ€è¦æ›´æ–°
                                child.material.needsUpdate = true;
                            }
                        }
                    });

                    // æ¨™è¨˜ç‚º FBX æ¨¡å‹
                    object.userData.isFBX = true;
                    
                    scene.add(object);
                    isLoaded = true;
                    
                    // éš±è—è¼‰å…¥ç•«é¢
                    document.getElementById('loading').style.display = 'none';
                    
                    console.log('FBX æ¨¡å‹è¼‰å…¥æˆåŠŸï¼');
                },
                function (progress) {
                    if (progress.total > 0) {
                        const percent = Math.round((progress.loaded / progress.total) * 100);
                        console.log('è¼‰å…¥é€²åº¦:', percent + '%');
                        document.querySelector('.loading p').textContent = `è¼‰å…¥ 3D æ¨¡å‹ä¸­... ${percent}%`;
                    }
                },
                function (error) {
                    console.error('è¼‰å…¥ FBX æ¨¡å‹æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    console.log('ä½¿ç”¨æ›¿ä»£æ¨¡å‹...');
                    loadFallbackModel();
                }
            );
        }

        // è¼‰å…¥æ›¿ä»£æ¨¡å‹
        function loadFallbackModel() {
            powerBank = createFallbackModel();
            
            // æ¨™è¨˜ç‚ºæ›¿ä»£æ¨¡å‹
            powerBank.userData.isFBX = false;
            
            // æ‡‰ç”¨éŸ¿æ‡‰å¼ç¸®æ”¾
            const responsiveScale = getResponsiveScale();
            powerBank.scale.setScalar(responsiveScale);
            powerBank.position.set(0, 0, 0);  // ç½®ä¸­é¡¯ç¤º
            scene.add(powerBank);
            isLoaded = true;
            
            // éš±è—è¼‰å…¥ç•«é¢
            document.getElementById('loading').style.display = 'none';
            
            // é¡¯ç¤ºä½¿ç”¨æ›¿ä»£æ¨¡å‹çš„æç¤º
            const loadingElement = document.getElementById('loading');
            loadingElement.style.display = 'block';
            loadingElement.innerHTML = `
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                    <p>âœ… æ­£åœ¨ä½¿ç”¨ç¤ºç¯„æ¨¡å‹</p>
                    <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px;">å¯¦éš›å°ˆæ¡ˆå°‡è¼‰å…¥æ‚¨çš„ FBX æª”æ¡ˆ</p>
                </div>
            `;
            
            // 3ç§’å¾Œéš±è—æç¤º
            setTimeout(() => {
                loadingElement.style.display = 'none';
            }, 3000);
            
            console.log('æ›¿ä»£æ¨¡å‹è¼‰å…¥æˆåŠŸï¼');
        }



        // æ»¾è¼ªæ—‹è½‰æ§åˆ¶
        function onWheel(event) {
            if (!isLoaded || !powerBank) return;
            
            // é˜²æ­¢é é¢æ»¾å‹•
            event.preventDefault();
            
            // æ ¹æ“šæ»¾è¼ªæ–¹å‘æ—‹è½‰æ¨¡å‹ï¼Œèª¿æ•´éˆæ•åº¦
            const rotationSpeed = 0.001;  // å¤§å¹…é™ä½éˆæ•åº¦è®“æ—‹è½‰æ›´ç²¾ç´°
            powerBank.rotation.y += event.deltaY * rotationSpeed;
            
            // æª¢æŸ¥æ˜¯å¦éœ€è¦é¡¯ç¤ºæˆ–éš±è— LED å¡ç‰‡
            checkLEDCardVisibility();
        }

        // è§¸æ§é–‹å§‹äº‹ä»¶
        function onTouchStart(event) {
            if (!isLoaded || !powerBank) return;
            
            // é˜²æ­¢é è¨­è¡Œç‚º
            event.preventDefault();
            
            if (event.touches.length === 1) {
                isTouching = true;
                touchStartX = event.touches[0].clientX;
                previousTouchX = event.touches[0].clientX;
            }
        }

        // è§¸æ§ç§»å‹•äº‹ä»¶
        function onTouchMove(event) {
            if (!isLoaded || !powerBank || !isTouching) return;
            
            // é˜²æ­¢é è¨­è¡Œç‚ºï¼ˆé¿å…é é¢æ»¾å‹•ï¼‰
            event.preventDefault();
            
            if (event.touches.length === 1) {
                const currentTouchX = event.touches[0].clientX;
                const deltaX = currentTouchX - previousTouchX;
                
                // è§¸æ§æ—‹è½‰éˆæ•åº¦èª¿æ•´ - å¢åŠ æ—‹è½‰ç¨‹åº¦ï¼Œåƒ…å·¦å³æ—‹è½‰
                const rotationSpeed = 0.008;  // å¢åŠ æ—‹è½‰éˆæ•åº¦
                powerBank.rotation.y += deltaX * rotationSpeed;
                
                // æ›´æ–°å‰ä¸€å€‹è§¸æ§ä½ç½®
                previousTouchX = currentTouchX;
                
                // æª¢æŸ¥æ˜¯å¦éœ€è¦é¡¯ç¤ºæˆ–éš±è— LED å¡ç‰‡
                checkLEDCardVisibility();
            }
        }

        // è§¸æ§çµæŸäº‹ä»¶
        function onTouchEnd(event) {
            // é˜²æ­¢é è¨­è¡Œç‚º
            event.preventDefault();
            
            isTouching = false;
            previousTouchX = 0;
            touchStartX = 0;
        }

        // ç²å– 3D æ¨¡å‹ä¸Š LED è¢å¹•çš„ 2D è¢å¹•ä½ç½®
        function getLEDScreenPosition() {
            if (!isLoaded || !powerBank) return null;
            
            // LED è¢å¹•åœ¨æ¨¡å‹ä¸Šçš„ç›¸å°ä½ç½® - å†å‘ä¸Šç§»å‹•50%
            const ledPosition = new THREE.Vector3(0, 1.8, 3.2); // LED åœ¨æ¨¡å‹æ­£é¢åœ“å½¢é¡¯ç¤ºå€åŸŸï¼ˆå†å‘ä¸Šç§»å‹•50%ï¼‰
            
            // å°‡ 3D ä½ç½®è½‰æ›ç‚ºä¸–ç•Œåº§æ¨™
            const worldPosition = ledPosition.clone();
            powerBank.localToWorld(worldPosition);
            
            // å°‡ä¸–ç•Œåº§æ¨™æŠ•å½±åˆ°è¢å¹•åº§æ¨™
            const screenPosition = worldPosition.clone();
            screenPosition.project(camera);
            
            // è½‰æ›ç‚ºåƒç´ åº§æ¨™
            const x = (screenPosition.x * 0.5 + 0.5) * window.innerWidth;
            const y = (-screenPosition.y * 0.5 + 0.5) * window.innerHeight;
            
            return { x, y };
        }

        // æ›´æ–°æŒ‡ç¤ºç·š
        function updatePointerLine() {
            const ledCard = document.getElementById('led-card');
            const pointerLine = document.getElementById('pointer-line');
            const path = document.getElementById('pointer-path');
            const dot = document.getElementById('pointer-dot');
            
            if (!ledCard.classList.contains('show')) {
                pointerLine.classList.remove('show');
                return;
            }
            
            // ç²å– LED è¢å¹•ä½ç½®
            const ledPos = getLEDScreenPosition();
            if (!ledPos) return;
            
            // ç²å–å­—å¡ä½ç½®
            const cardRect = ledCard.getBoundingClientRect();
            const isMobile = window.innerWidth <= 768;
            
            // æ‰‹æ©Ÿç‰ˆå’Œæ¡Œæ©Ÿç‰ˆä½¿ç”¨ä¸åŒçš„é€£æ¥é»
            let cardX, cardY;
            if (isMobile) {
                // æ‰‹æ©Ÿç‰ˆï¼šå¾å¡ç‰‡é ‚éƒ¨ä¸­å¤®é€£æ¥
                cardX = cardRect.left + cardRect.width / 2;
                cardY = cardRect.top;
            } else {
                // æ¡Œæ©Ÿç‰ˆï¼šå¾å¡ç‰‡å·¦å´ä¸­å¤®é€£æ¥
                cardX = cardRect.left;
                cardY = cardRect.top + cardRect.height / 2;
            }
            
            // è¨­ç½® SVG å¤§å°è¦†è“‹æ•´å€‹è¢å¹•
            const svg = pointerLine.querySelector('svg');
            svg.style.width = '100vw';
            svg.style.height = '100vh';
            pointerLine.style.left = '0';
            pointerLine.style.top = '0';
            pointerLine.style.width = '100vw';
            pointerLine.style.height = '100vh';
            
            // è¨ˆç®—ç¶ è‰²åœ“é»çš„æœ€çµ‚ä½ç½®
            const finalDotX = ledPos.x;
            const finalDotY = ledPos.y - 100 + (isMobile ? 50 : 0); // æ‰‹æ©Ÿç‰ˆä¸Šç§»50px (åŸæœ¬ä¸‹ç§»100pxï¼Œç¾åœ¨æ”¹ç‚ºä¸‹ç§»50px)
            
            // è¨ˆç®—æ§åˆ¶é»å‰µå»ºæ›²ç·šï¼ˆé‡å°æ‰‹æ©Ÿç‰ˆå’Œæ¡Œæ©Ÿç‰ˆå„ªåŒ–ï¼‰
            let controlX, controlY;
            if (isMobile) {
                // æ‰‹æ©Ÿç‰ˆï¼šå‚ç›´æ–¹å‘çš„æ›²ç·š
                controlX = cardX + (finalDotX - cardX) * 0.3;
                controlY = cardY - (cardY - finalDotY) * 0.7;
            } else {
                // æ¡Œæ©Ÿç‰ˆï¼šæ°´å¹³æ–¹å‘çš„æ›²ç·š
                controlX = cardX - (cardX - finalDotX) * 0.3;
                controlY = cardY - (cardY - finalDotY) * 0.5;
            }
            
            // å‰µå»ºæ›²ç·šè·¯å¾‘ - çµ‚é»é€£æ¥åˆ°ç¶ è‰²åœ“é»
            const pathData = `M ${cardX} ${cardY} Q ${controlX} ${controlY} ${finalDotX} ${finalDotY}`;
            path.setAttribute('d', pathData);
            
            // è¨­ç½®çµ‚é»åœ“é»ä½ç½® - å‘ä¸Šç§»å‹•100px
            dot.setAttribute('cx', finalDotX);
            dot.setAttribute('cy', finalDotY);
            
            // é¡¯ç¤ºæŒ‡ç¤ºç·š
            pointerLine.classList.add('show');
        }

        // æª¢æŸ¥ LED å¡ç‰‡é¡¯ç¤ºæ¢ä»¶
        function checkLEDCardVisibility() {
            if (!isLoaded || !powerBank) return;
            
            // ç²å–ç•¶å‰æ—‹è½‰è§’åº¦ï¼ˆæ­£è¦åŒ–åˆ° 0-2Ï€ ç¯„åœï¼‰
            let currentRotation = powerBank.rotation.y % (Math.PI * 2);
            if (currentRotation < 0) currentRotation += Math.PI * 2;
            
            // å®šç¾© LED è¢å¹•å¯è¦‹çš„è§’åº¦ç¯„åœ - ä¿æŒèµ·å§‹è§’åº¦ï¼ŒçµæŸè§’åº¦è¨­ç‚º70åº¦
            const ledVisibleStart = Math.PI * 0.2;   // ç´„ 36 åº¦ï¼ˆä¿æŒèµ·å§‹è§’åº¦ï¼‰
            const ledVisibleEnd = Math.PI * 0.39;    // ç´„ 70 åº¦
            
            const ledCard = document.getElementById('led-card');
            const pointerLine = document.getElementById('pointer-line');
            
            // æª¢æŸ¥æ˜¯å¦åœ¨å¯è¦‹è§’åº¦ç¯„åœå…§
            const isInLEDRange = (currentRotation >= ledVisibleStart && currentRotation <= ledVisibleEnd);
            
            if (isInLEDRange) {
                // é¡¯ç¤º LED å¡ç‰‡
                if (!ledCard.classList.contains('show')) {
                    ledCard.classList.add('show');
                    // å»¶é²é¡¯ç¤ºæŒ‡ç¤ºç·šï¼Œè®“å¡ç‰‡å…ˆå‡ºç¾
                    setTimeout(() => {
                        updatePointerLine();
                    }, 300);
                } else {
                    // å¡ç‰‡å·²é¡¯ç¤ºï¼Œæ›´æ–°æŒ‡ç¤ºç·šä½ç½®
                    updatePointerLine();
                }
            } else {
                // éš±è— LED å¡ç‰‡å’ŒæŒ‡ç¤ºç·š
                if (ledCard.classList.contains('show')) {
                    ledCard.classList.remove('show');
                    pointerLine.classList.remove('show');
                }
            }
        }

        // è¦–çª—å¤§å°æ”¹è®Šè™•ç†ï¼ˆåŒ…å«éŸ¿æ‡‰å¼é‡æ–°ç¸®æ”¾ï¼‰
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            // é‡æ–°èª¿æ•´æ¨¡å‹ç¸®æ”¾å’Œç›¸æ©Ÿä½ç½®
            if (isLoaded && powerBank) {
                const responsiveScale = getResponsiveScale();
                const baseScale = 0.3;  // èˆ‡ FBX è¼‰å…¥æ™‚çš„åŸºç¤ç¸®æ”¾ä¿æŒä¸€è‡´
                
                if (powerBank.userData.isFBX) {
                    // FBX æ¨¡å‹
                    powerBank.scale.setScalar(baseScale * responsiveScale);
                } else {
                    // æ›¿ä»£æ¨¡å‹
                    powerBank.scale.setScalar(responsiveScale);
                }
                
                // èª¿æ•´ç›¸æ©Ÿä½ç½®
                const responsiveDistance = getResponsiveCameraDistance();
                camera.position.set(responsiveDistance, responsiveDistance * 0.7, responsiveDistance);
            }
            
            // æ›´æ–°æŒ‡ç¤ºç·šä½ç½®
            setTimeout(() => {
                updatePointerLine();
            }, 100);
            
            // æ›´æ–°æ§åˆ¶æç¤ºï¼ˆéŸ¿æ‡‰å¼è®ŠåŒ–ï¼‰
            updateControlHints();
        }

        // å‹•ç•«å¾ªç’°
        function animate() {
            requestAnimationFrame(animate);
            
            // æ›´æ–°æ§åˆ¶å™¨
            controls.update();
            
            // æ¯å¹€æª¢æŸ¥ LED å¡ç‰‡é¡¯ç¤ºç‹€æ…‹ï¼ˆä»¥é˜²æœ‰å…¶ä»–æ—‹è½‰è§¸ç™¼ï¼‰
            if (isLoaded) {
                checkLEDCardVisibility();
            }
            
            // æ¸²æŸ“å ´æ™¯
            renderer.render(scene, camera);
        }

        // æª¢æ¸¬è£ç½®é¡å‹ä¸¦æ›´æ–°æ§åˆ¶æç¤º
        function updateControlHints() {
            const controlText = document.getElementById('control-text');
            const controlIcon = document.getElementById('control-icon');
            
            // æª¢æ¸¬æ˜¯å¦ç‚ºè§¸æ§è£ç½®
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const isMobile = window.innerWidth <= 768;
            
            if (isTouchDevice && isMobile) {
                // æ‰‹æ©Ÿ/å¹³æ¿è§¸æ§è£ç½®
                controlText.textContent = 'ç”¨æ‰‹æŒ‡å·¦å³æ‹–æ‹½æ—‹è½‰ç”¢å“ â€¢ è½‰åˆ°æ­£é¢æŸ¥çœ‹ LED åŠŸèƒ½';
                controlIcon.textContent = 'ğŸ‘†';
            } else if (isTouchDevice) {
                // è§¸æ§è¢å¹•æ¡Œæ©Ÿæˆ–å¤§å¹³æ¿
                controlText.textContent = 'ä½¿ç”¨æ»¾è¼ªæˆ–è§¸æ§æ‹–æ‹½æ—‹è½‰ç”¢å“ â€¢ è½‰åˆ°æ­£é¢æŸ¥çœ‹ LED åŠŸèƒ½';
                controlIcon.textContent = 'ğŸ–±ï¸';
            } else {
                // ç´”æ»‘é¼ æ¡Œæ©Ÿ
                controlText.textContent = 'ä½¿ç”¨æ»¾è¼ªæ—‹è½‰ç”¢å“ â€¢ è½‰åˆ°æ­£é¢æŸ¥çœ‹ LED åŠŸèƒ½';
                controlIcon.textContent = 'ğŸ–±ï¸';
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            updateControlHints();
            init();
        });
    </script>
</body>
</html>
